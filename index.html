<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font: 13px Helvetica, Arial; background-color:green; }
      #chat { height:300px; position:fixed; bottom:0; width:100%; background-color:white; }
      #messages { overflow:hidden; list-style-type: none; margin: 0; padding: 0; height:256px; overflow-y:scroll; }
      #messages li { padding: 5px 10px; }
      #messages li:nth-child(odd) { background: #eee; }
    </style>
    <script type="text/javascript">
        function getTime() {
            var d = new Date(),
                h = (d.getHours()<10?'0':'') + d.getHours(),
                m = (d.getMinutes()<10?'0':'') + d.getMinutes(),
                s = (d.getSeconds()<10?'0':'') + d.getSeconds();
            return "["+h+":"+m+":"+s+"] ";
        }
        
        
        
    </script>
  </head>
  <body>
    <form id="login" action="">
        <input id="name" type="username" placeholder="Username" required>
        <button>Login</button>
    </form>
    <div id="chat">
        <ul id="messages"></ul>
        <div id="input" style="padding:0;background-color:#eee;">
            <form class="input-group" id="message" action="">
                <input class="form-control" id="m" autocomplete="off" placeholder="Enter message" />
                <span class="input-group-btn"><button id="m-btn" class="btn btn-primary">Send</button></span>
            </form>
        </div>
    </div>
    
    <script>
        $(document).ready(function() {
            $("#messages").height( $("#chat").height() - $("#input").height() );
            
        });
      var socket = io();
      $('#login').submit(function() {
        var name = $.trim( $('#name').val() );
        $('#login').hide();
        
        if( name!==null && name!=="" ) {
            socket.emit('join', name);
            
        }
        
        return false;
      });
      
      $('#message').submit(function(){
        var msg = $.trim( $('#m').val() );
        
        if( msg!==null && msg!=="" ) {
            socket.emit('chat message', msg);
        }
        $('#m').val('');
        return false;
      });
      
      socket.on('chat message', function(msg){
        $('#messages').append($('<li>').text(getTime() + msg));
        $('#messages').scrollTop( $("#messages")[0].scrollHeight );
      });
      
      socket.on('update', function(msg) {
        $('#messages').append($('<li style=\"color:#39F;\">').text(getTime() + msg));
        $('#messages').scrollTop( $("#messages")[0].scrollHeight );
      });
    </script>
  </body>
</html>